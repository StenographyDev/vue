const version = process.argv[2] || process.env.VERSION
const cc = require('conventional-changelog')
const file = `./RELEASE_NOTE${version ? `_${version}` : ``}.md`
const fileStream = require('fs').createWriteStream(file)

cc({
  preset: 'angular',
  pkg: {
 /*
 This code is setting the version of the package to `v${version}`.
 - generated by stenography autopilot [ ðŸš—ðŸ‘©â€âœˆï¸ ] 
 */
    transform (pkg) {
      pkg.version = `v${version}`
      return pkg
    }
  }
 /*
 This code is generating a release note for the current version of the project.
 The code block uses JavaScript's `console.log` function to print out a message with the path to where this file was saved on disk.
 - generated by stenography autopilot [ ðŸš—ðŸ‘©â€âœˆï¸ ] 
 */
}).pipe(fileStream).on('close', () => {
  console.log(`Generated release note at ${file}`)
})
